function deparam(t,e){var a={},n={true:!0,false:!1,null:null};return $.each(t.replace(/\+/g," ").split("&"),function(t,r){var o,h=r.split("="),u=decodeURIComponent(h[0]),i=a,s=0,p=u.split("]["),l=p.length-1;if(/\[/.test(p[0])&&/\]$/.test(p[l])?(p[l]=p[l].replace(/\]$/,""),l=(p=p.shift().split("[").concat(p)).length-1):l=0,2===h.length){if(o=decodeURIComponent(h[1]),e&&(o=o&&!isNaN(o)?+o:"undefined"===o?void 0:void 0!==n[o]?n[o]:o),l)for(;s<=l;s++)i=i[u=""===p[s]?i.length:p[s]]=s<l?i[u]||(p[s+1]&&isNaN(p[s+1])?{}:[]):o;else $.isArray(a[u])?a[u].push(o):void 0!==a[u]?a[u]=[a[u],o]:a[u]=o}else u&&(a[u]=e?void 0:"")}),a}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("deparam.js")):"function"==typeof define&&define.amd?define(["exports","jquery","deparam.js"],e):e((t=t||self).jqueryrouter={},t.jQuery,t.deparam)}(this,function(t,e,a){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var r,o={handlers:[]},h=history&&history.pushState,u=window.location,i={noTrigger:!1},s={pathname:/^\/(?=[^?]*)/,routeparams:/:[^\/]+/g,hashQuery:/\?.+/},p={routeChanged:"routeChanged",hashchange:"hashchange",popstate:"popstate"},l={invalidPath:"Path is invalid"};function c(t,e){null!=t&&"object"===n(t)&&Object.keys(t).forEach(function(a){e[a]=t[a]})}function f(){var t=0,e=arguments[0]&&"object"===n(arguments[0])?arguments[0]:{};for(t=1;t<arguments.length;t++)c(arguments[t],e);return e}function d(t){return Array.prototype.slice.call(t)}function g(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(i.noTrigger&&e===p.hashchange){i.noTrigger=!1;return}var r=f({},i.currentData);a&&delete i.currentData,P.events.trigger(p.routeChanged,{data:f({},a?r:{},{eventType:e,hash:!!a,route:t,isInit:n})})}function y(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],e=a(u.search,t),n={};return u.hash.match(s.hashQuery)&&(n=a(u.hash.match(s.hashQuery)[0],t)),f({},e,n)}function v(t,e,a){var n,r,o,h;if("string"==typeof(n=t)&&s.pathname.test(n)){return r=t,o=e,h=a,o||h?"string"==typeof o?(o=o.trim())&&h?"".concat(r).concat(u.search,"&").concat(o.replace("?","")):o?"".concat(r,"?").concat(o.replace("?","")):r:void 0:r}throw TypeError(l.invalidPath)}function m(t,e,a){if(t){var r=null,o="",s="",l=!1,c=!1,d={};i.noTrigger=a,"object"===n(t)?(d=t.data,r=t.title,o=t.route,s=t.queryString,l=t.appendQuery):"string"==typeof t&&(o=t),"#"===o.charAt(0)&&(c=!0,o=o.replace("#","")),h&&!c?(history[e?"replaceState":"pushState"](i.data,r,v(o,s,l)),a||(d=f({},d,{eventType:p.popstate,hash:!1,route:o}),P.events.trigger(p.routeChanged,{data:d}))):(i.currentData=d,e?u.replace("#"+v(o,s,l)):u.hash=v(o,s,l))}}function _(t,e){var a=this;"function"==typeof t&&(e=t,t="*"),o.handlers.filter(function(n){var r=n.originalHandler===e&&n.route===t;return a&&(r=r&&n.element===a),r}).length||o.handlers.push({eventName:p.routeChanged,originalHandler:e,handler:e.bind(this),element:this,route:t})}function j(t,e){var a=arguments.length;0===a.length&&(o.handlers.length=0),o.handlers=o.handlers.filter(function(n){return 1===a.length&&"string"==typeof a[0]?n.route!==t:(1===a.length&&"function"==typeof a[0]&&(e=a[0],t="*"),!(n.route===t&&n.handler===e))})}function b(t){return t.replace(/^([^a-zA-Z0-9]+)|([^a-zA-Z0-9]+)$/g,"")}function C(t,e,a){if(~e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),s.routeparams.lastIndex=0,!s.routeparams.test(t))return t===e||"*"===t;a.params={};var n=RegExp(t.replace(/\//g,"\\/").replace(/:[^\/\\]+/g,"([^\\/]+)"));if(n.test(e)){s.routeparams.lastIndex=0;var r=d(t.match(s.routeparams)).map(b),o=d(e.match(n));return o.shift(),r.forEach(function(t,e){a.params[t]=o[e]}),!0}return!1}function T(t,e){(e=f(e)).data=f(e.data);var a=e.data,n=a.hash,r=a.isInit;o.handlers.forEach(function(a){a.eventName===t&&(h&&!n&&C(a.route,u.pathname,e)&&!(r&&a.called)?(a.called=!0,a.handler(e.data,e.params,y(!1))):n&&(!u.hash&&!h&&C(a.route,u.pathname,e)?(i.data=e.data,u.replace("#"+u.pathname)):C(a.route,u.hash.substring(1),e)&&!(r&&a.hashCalled)&&(a.hashCalled=!0,a.handler(e.data,e.params,y(!1)))))})}var P={events:f({trigger:function t(e,a){return T.apply(this,[e,a])}},p),init:function t(){var a={eventType:h?p.popstate:p.hashchange,hash:!h,route:h?u.pathname:u.hash,isInit:!0};this.events.trigger(p.routeChanged,{data:a}),u.hash&&e(window).trigger(p.hashchange,[!0])},set:function t(){return m.apply(this,arguments)},historySupported:!!h};function x(){return _.apply(this,arguments)}function I(){return j.apply(this,arguments)}"function"==typeof e&&(e.route=e.prototype.route=x,e.unroute=e.prototype.unroute=I,e.router=P),(r=e(window)).on(p.popstate,function(t){g.apply(this,[u.pathname,t.type])}),r.on(p.hashchange,function(t,e){g.apply(this,[u.hash,t.type,!0,e])}),t.route=x,t.router=P,t.unroute=I,Object.defineProperty(t,"__esModule",{value:!0})});